<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>03장 쿠버네티스 컨테이너 실행하기 | 📝 Today Gimun Learned</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/TIL/images/logo-144.png">
    <link rel="manifest" href="/TIL/manifest.json">
    <meta name="description" content="Personal Wiki (Today I Learned)">
    <link rel="preload" href="/TIL/assets/css/0.styles.d478e3a5.css" as="style"><link rel="preload" href="/TIL/assets/js/app.43b6f0d7.js" as="script"><link rel="preload" href="/TIL/assets/js/2.665be0f4.js" as="script"><link rel="preload" href="/TIL/assets/js/23.6d4bf165.js" as="script"><link rel="preload" href="/TIL/assets/js/9.5460ba57.js" as="script"><link rel="preload" href="/TIL/assets/js/10.0186ca23.js" as="script"><link rel="prefetch" href="/TIL/assets/js/11.f02ce37d.js"><link rel="prefetch" href="/TIL/assets/js/12.676d19bd.js"><link rel="prefetch" href="/TIL/assets/js/13.c6904bf2.js"><link rel="prefetch" href="/TIL/assets/js/14.447adfa9.js"><link rel="prefetch" href="/TIL/assets/js/15.7ac03229.js"><link rel="prefetch" href="/TIL/assets/js/16.986ee545.js"><link rel="prefetch" href="/TIL/assets/js/17.c592a804.js"><link rel="prefetch" href="/TIL/assets/js/18.c95b0edd.js"><link rel="prefetch" href="/TIL/assets/js/19.a3a8db9b.js"><link rel="prefetch" href="/TIL/assets/js/20.291ec964.js"><link rel="prefetch" href="/TIL/assets/js/21.a4bef1d3.js"><link rel="prefetch" href="/TIL/assets/js/22.4ad3925b.js"><link rel="prefetch" href="/TIL/assets/js/24.28de3946.js"><link rel="prefetch" href="/TIL/assets/js/25.e1890c0f.js"><link rel="prefetch" href="/TIL/assets/js/26.369c5639.js"><link rel="prefetch" href="/TIL/assets/js/27.15fa532a.js"><link rel="prefetch" href="/TIL/assets/js/28.a185f3fa.js"><link rel="prefetch" href="/TIL/assets/js/29.8d45c731.js"><link rel="prefetch" href="/TIL/assets/js/3.023b1c34.js"><link rel="prefetch" href="/TIL/assets/js/30.f67b9aa0.js"><link rel="prefetch" href="/TIL/assets/js/31.26f9e082.js"><link rel="prefetch" href="/TIL/assets/js/32.fe0055e1.js"><link rel="prefetch" href="/TIL/assets/js/33.822f99c7.js"><link rel="prefetch" href="/TIL/assets/js/34.757196c0.js"><link rel="prefetch" href="/TIL/assets/js/35.414d1489.js"><link rel="prefetch" href="/TIL/assets/js/36.251b5f66.js"><link rel="prefetch" href="/TIL/assets/js/37.17e500ec.js"><link rel="prefetch" href="/TIL/assets/js/38.68350cc7.js"><link rel="prefetch" href="/TIL/assets/js/4.b0a67ecb.js"><link rel="prefetch" href="/TIL/assets/js/5.bad944ca.js"><link rel="prefetch" href="/TIL/assets/js/6.0b0888e7.js"><link rel="prefetch" href="/TIL/assets/js/7.7400ba8a.js"><link rel="prefetch" href="/TIL/assets/js/8.62e92e2f.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.d478e3a5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">📝 Today Gimun Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/GimunLee/TIL" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/GimunLee/TIL" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🎯 Goals For</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>💎 Web</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>📖 Kubernetes</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/book-kubernetes/01장 쿠버네티스.html" class="sidebar-link">01장 쿠버네티스</a></li><li><a href="/TIL/book-kubernetes/02장 쿠버네티스 도구.html" class="sidebar-link">02장 쿠버네티스 도구</a></li><li><a href="/TIL/book-kubernetes/03장 쿠버네티스로 컨테이너 실행하기.html" class="active sidebar-link">03장 쿠버네티스 컨테이너 실행하기</a></li><li><a href="/TIL/book-kubernetes/04장 쿠버네티스 기본 개념.html" class="sidebar-link">04장 쿠버네티스 기본 개념</a></li><li><a href="/TIL/book-kubernetes/05장 파드.html" class="sidebar-link">05장 파드</a></li><li><a href="/TIL/book-kubernetes/06장 컨트롤러.html" class="sidebar-link">06장 컨트롤러</a></li><li><a href="/TIL/book-kubernetes/07장 서비스.html" class="sidebar-link">07장 서비스</a></li><li><a href="/TIL/book-kubernetes/08장 인그레스.html" class="sidebar-link">08장 인그레스</a></li><li><a href="/TIL/book-kubernetes/09장 레이블과 어노테이션.html" class="sidebar-link">레이블과 애너테이션</a></li><li><a href="/TIL/book-kubernetes/10장 컨피그맵.html" class="sidebar-link">10장 컨피그맵</a></li><li><a href="/TIL/book-kubernetes/11장 시크릿.html" class="sidebar-link">11장 시크릿</a></li><li><a href="/TIL/book-kubernetes/복사용.html" class="sidebar-link">/book-kubernetes/복사용.html</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>📖 Angular Essentials</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>📖 Object</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>📖 Head First Design Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>📚 ETC</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_03장-쿠버네티스-컨테이너-실행하기"><a href="#_03장-쿠버네티스-컨테이너-실행하기" class="header-anchor">#</a> 03장 쿠버네티스 컨테이너 실행하기</h1> <p id="abg">Assembled by GimunLee</p> <br> <h2 id="kubectl"><a href="#kubectl" class="header-anchor">#</a> kubectl</h2> <ul><li>쿠버네티스 클러스터를 관리하는 동작 대부분은 <strong>kubectl이라는 커맨드 인터페이스로(Command Line interface, CLI)로 실행 가능</strong></li> <li>쿠버네티스 자원들의 생성, 업데이트, 삭제(create, update, delete)</li> <li>디버그, 모니터링, 트러블 슈팅(log, exec, cp, top, attach)</li> <li>클러스터 관리(cordon, top, drain, taint)</li></ul> <h3 id="기본-사용법"><a href="#기본-사용법" class="header-anchor">#</a> 기본 사용법</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl <span class="token punctuation">[</span>command<span class="token punctuation">]</span> <span class="token punctuation">[</span>TYPE<span class="token punctuation">]</span> <span class="token punctuation">[</span>NAME<span class="token punctuation">]</span> <span class="token punctuation">[</span>flags<span class="token punctuation">]</span>
</code></pre></div><ul><li><strong>command:</strong> 자원에 실행하려는 동작 (create, get, delete)</li> <li><strong>TYPE:</strong> 자원 타입 (pod, service, ingress)</li> <li><strong>NAME:</strong> 자원 이름</li> <li><strong>FLAG:</strong> 부가적으로 설정할 옵션</li></ul> <h3 id="kubectl-get"><a href="#kubectl-get" class="header-anchor">#</a> kubectl get</h3> <ul><li>쿠버네티스 자원 상태 확인하는 명령어</li></ul> <h4 id="kubctl-get-pods"><a href="#kubctl-get-pods" class="header-anchor">#</a> kubctl get pods</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get pods
</code></pre></div><ul><li><p><strong>NAME:</strong> 파드 이름 표시</p></li> <li><p><strong>READY:</strong> 파드의 준비 상태 표시</p> <ul><li>0/1: 파드가 생성되었으나 사용할 준비가 되지 않음</li> <li>1/1: 파드가 생성되었고 사용할 준비가 되었음</li></ul></li> <li><p><strong>STATUS:</strong> 파드의 현재 상태 표시</p> <ul><li><p>Running: 파드가 실행됨</p></li> <li><p>Terminating: 컨테이너 접속 중</p></li> <li><p>ContainerCreating: 컨테이너 생성 중</p></li></ul></li> <li><p><strong>RESTARTS:</strong> 해당 파드가 몇 번 재시작했는지를 표시</p></li> <li><p><strong>AGE:</strong> 파드를 생성한 후 얼마나 시간이 지났는지 표시</p></li></ul> <h4 id="kubectl-get-services"><a href="#kubectl-get-services" class="header-anchor">#</a> Kubectl get services</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get services
</code></pre></div><ul><li><p><strong>NAME:</strong> 서비스의 이름 표시</p></li> <li><p><strong>TYPE:</strong> 서비스 타입 표시</p></li> <li><p><strong>CLUSTER-IP:</strong> 현재 클러스터 안에서 사용되는 IP</p></li> <li><p><strong>EXTERNAL-IP:</strong> 클러스터 외부에서 접속할 때 사용하는 IP</p></li> <li><p><strong>PORT(S):</strong> 해당 서비스에 접속하는 포트 표시</p></li> <li><p><strong>AGE:</strong> 자원을 생성한 후 얼마나 시간이 지났는지 표시</p></li> <li><p>추가로, kubernets라는 이름의 서비스는 kube-apiserver 관련 파드들을 가르킴</p></li></ul> <br> <h2 id="posix-gnu-스타일의-명령-작성-규칙"><a href="#posix-gnu-스타일의-명령-작성-규칙" class="header-anchor">#</a> POSIX/GNU 스타일의 명령 작성 규칙</h2> <ul><li>kubectl은 기본적으로 POSIX/GNU 스타일의 명령 작성 규칙을 따름</li></ul> <h3 id="주요-규칙"><a href="#주요-규칙" class="header-anchor">#</a> 주요 규칙</h3> <ul><li>-과 함께 사용하는 옵션은 단일 알파벳/숫자 문자 인자와 같은 짧은 옵션(short option)</li> <li>일부 옵션은 인자를 필요로 함</li> <li>--과 함께 사용하는 옵션은 알파벳 두 글자 이상으로 구성한 긴 옵션(long options)</li> <li>-- 이후에 작성하는 인자가 있다면 쿠버네티스 관련 옵션들을 종료</li></ul> <br> <h2 id="kubeconfig-환경-변수"><a href="#kubeconfig-환경-변수" class="header-anchor">#</a> Kubeconfig 환경 변수</h2> <ul><li>kubectl은 기본적으로 $HOME/.kube/config 파일에서 클러스터, 인증, 컨텍스트 정보를 읽어들이는데, 이러한 클러스터 구성 정보를 kubeconfig라고 칭함</li> <li>클러스터에서 사용할 수 있는 자원들은 <code>$ kubectl api-resources</code> 명령으로 확인 가능한데, 자원을 사용하기 전 반드시 확인하는 것이 좋음</li></ul> <br> <h2 id="디플로이먼트를-이용해-컨테이너-실행하기"><a href="#디플로이먼트를-이용해-컨테이너-실행하기" class="header-anchor">#</a> 디플로이먼트를 이용해 컨테이너 실행하기</h2> <ul><li>쿠버네티스를 이용해서 컨테이너를 실행하는 방법에는 크게 두 가지가 존재
<ol><li><code>$ kubectl run</code> 명령으로 직접 컨테이너를 실행</li> <li>컨테이너를 어떻게 실행할지 세부 내용을 담은 YAML 형식의 템플릿으로 컨테이너 실행</li></ol></li> <li>템플릿으로 컨테이너를 관리하면 버전 관리 시스템과 연동해서 자원 정의 변동 사항을 추적하기 쉽다는 장점이 있음</li></ul> <h3 id="kubectl-run으로-컨테이너-실행하기"><a href="#kubectl-run으로-컨테이너-실행하기" class="header-anchor">#</a> kubectl run으로 컨테이너 실행하기</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl run 디플로이먼트이름 --image 컨테이너이미지이름 --port<span class="token operator">=</span>포트번호
</code></pre></div><ul><li>쿠버네티스는 파드를 실행하는 여러 가지 컨트롤러를 제공하는데, <code>$ kubectl run</code>으로 파드를 실행시킬때 기본 컨트롤러는 <strong>디플로이먼트(deployment)</strong></li> <li>사용자가 쿠버네티스 클러스터에 컨테이너를 실행하라고 명령하면 지정된 컨테이너 이미지를 가져와 쿠버네티스 클러스터 안에서 실행</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl get deployments
</code></pre></div><ul><li><strong>NAME:</strong> 클러스터에 배포한 디플로이먼트 이름</li> <li><strong>READY:</strong> 사용자가 최종 배포한 파드 개수와 디플로이먼트를 이용해 현재 클러스터에 실제로 동작시킨 파드 개수를 X/X 형태로 표시</li> <li><strong>UP-TO-DATE:</strong> 디플로이먼트 설정에 정의한 대로 동작중인 신규 파드 개수</li> <li><strong>AVAILABLE:</strong> 서비스 가능한 파드 개수로 헬스 체크로 서비스 가능한 상태라고 판단하면, AVAILABLE 항목의 파드 개수에 포함</li> <li><strong>AGE:</strong> 디플로이먼트를 생성한 후 얼마나 지났는지 시간을 표시</li></ul> <h3 id="템플릿으로-컨테이너-실행하기"><a href="#템플릿으로-컨테이너-실행하기" class="header-anchor">#</a> 템플릿으로 컨테이너 실행하기</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>app
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>app
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>app
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>app
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>app
        <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl apply -f nginx-app.yaml
</code></pre></div><ul><li>쿠버네티스의 자원들은 관련 설정을 정의한 템플릿과 <code>$ kubectl apply</code> 명령을 이용해 선억적 형태로 관리할 것을 권장</li></ul> <br> <h2 id="referenses"><a href="#referenses" class="header-anchor">#</a> Referenses</h2> <ul><li>쿠버네티스 입문 - 90가지 예제로 배우는 컨테이너 관리 자동화 표준 / 동양북스</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/12/2020, 11:05:02 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/book-kubernetes/02장 쿠버네티스 도구.html" class="prev">
        02장 쿠버네티스 도구
      </a></span> <span class="next"><a href="/TIL/book-kubernetes/04장 쿠버네티스 기본 개념.html">
        04장 쿠버네티스 기본 개념
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/TIL/assets/js/app.43b6f0d7.js" defer></script><script src="/TIL/assets/js/2.665be0f4.js" defer></script><script src="/TIL/assets/js/23.6d4bf165.js" defer></script><script src="/TIL/assets/js/9.5460ba57.js" defer></script><script src="/TIL/assets/js/10.0186ca23.js" defer></script>
  </body>
</html>
